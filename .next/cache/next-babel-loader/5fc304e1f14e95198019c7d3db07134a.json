{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { NextPageContext } from \"next\";\nimport { getSortedPostsData } from '../lib/posts';\n\nvar blogPostsXml = function blogPostsXml(blogPostsData) {\n  var latestPost = 0;\n  var postsXml = \"\";\n  blogPostsData.map(function (post) {\n    var postDate = Date.parse(post.date);\n\n    if (!latestPost || postDate > latestPost) {\n      latestPost = postDate;\n    }\n\n    postsXml += \"\\n    <url>\\n      <loc>\".concat(post.id, \"</loc>\\n      <lastmod>\").concat(postDate, \"</lastmod>\\n      <priority>0.80</priority>\\n    </url>\");\n  });\n  return {\n    postsXml: postsXml,\n    latestPost: latestPost\n  };\n};\n\nvar sitemapXml = function sitemapXml(blogPostsData) {\n  var _blogPostsXml = blogPostsXml(blogPostsData),\n      postsXml = _blogPostsXml.postsXml,\n      latestPost = _blogPostsXml.latestPost;\n\n  return \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n    <urlset xmlns=\\\"http://www.sitemaps.org/schemas/sitemap/0.9\\\">\\n    <url>\\n      <loc>https://naina.app/</loc>\\n      <lastmod>\".concat(latestPost, \"</lastmod>\\n      <priority>1.00</priority>\\n    </url>\\n    <url>\\n      <loc>https://naina.app/posts</loc>\\n      <priority>0.8</priority>\\n    </url>\\n    <url>\\n      <loc>https://naina.app/work</loc>\\n      <priority>0.7</priority>\\n    </url>\\n    <url>\\n      <loc>https://naina.app/talks</loc>\\n      <priority>0.5</priority>\\n    </url>\\n    \").concat(postsXml, \"\\n  </urlset>\");\n};\n\nvar Sitemap = function Sitemap() {};\n\nSitemap.getInitialProps = function _callee(res) {\n  var blogPostsData;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          blogPostsData = getSortedPostsData();\n          res.setHeader(\"Content-Type\", \"text/xml\");\n          res.write(sitemapXml(blogPosts));\n          res.end();\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};","map":null,"metadata":{},"sourceType":"module"}