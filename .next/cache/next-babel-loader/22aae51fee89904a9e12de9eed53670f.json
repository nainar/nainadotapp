{"ast":null,"code":"import { SitemapStream, streamToPromise } from 'sitemap';\nexport default (async (req, res) => {\n  try {\n    const smStream = new SitemapStream({\n      hostname: `https://${req.headers.host}`,\n      cacheTime: 600000\n    }); // List of posts\n\n    const posts = []; // Create each URL row\n\n    posts.forEach(post => {\n      smStream.write({\n        url: `/post/${post.slug}`,\n        changefreq: 'daily',\n        priority: 0.9\n      });\n    }); // End sitemap stream\n\n    smStream.end(); // XML sitemap string\n\n    const sitemapOutput = (await streamToPromise(smStream)).toString(); // Change headers\n\n    res.writeHead(200, {\n      'Content-Type': 'application/xml'\n    }); // Display output to user\n\n    res.end(sitemapOutput);\n  } catch (e) {\n    console.log(e);\n    res.send(JSON.stringify(e));\n  }\n});","map":null,"metadata":{},"sourceType":"module"}